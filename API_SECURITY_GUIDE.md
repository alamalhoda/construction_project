# ๐ ุฑุงูููุง ุงููุช API - ูพุฑูฺู ุณุงุฎุชูุงู

## ๐ ููุฑุณุช ูุทุงูุจ
1. [ุดุฑูุน ุณุฑุน](#ุดุฑูุน-ุณุฑุน)
2. [ุตูุญู ูุงฺฏู API](#ุตูุญู-ูุงฺฏู-api)
3. [ุงุณุชูุงุฏู ุงุฒ API](#ุงุณุชูุงุฏู-ุงุฒ-api)
4. [ุงููุช API](#ุงููุช-api)
5. [ูุซุงูโูุง ุนูู](#ูุซุงููุง-ุนูู)

## ๐ ุดุฑูุน ุณุฑุน

### 1. ุฏุณุชุฑุณ ุจู ุตูุญู ูุงฺฏู API
```
http://127.0.0.1:8000/construction/api/login/
```

### 2. ูุฑูุฏ ุจู API
- ูุงู ฺฉุงุฑุจุฑ: `admin`
- ุฑูุฒ ุนุจูุฑ: ุฑูุฒ ุนุจูุฑ ุงุฏูู ุดูุง

### 3. ุฏุฑุงูุช Token
ูพุณ ุงุฒ ูุฑูุฏ ููููุ token ุฏุฑุงูุช ุฎูุงูุฏ ฺฉุฑุฏ ฺฉู ุจุฑุง ุฏุณุชุฑุณ ุจู API ุงุณุชูุงุฏู ูโุดูุฏ.

## ๐ ุตูุญู ูุงฺฏู API

### ูฺฺฏโูุง ุตูุญู ูุงฺฏู:
- โ **ุฑุงุจุท ฺฉุงุฑุจุฑ ูุงุฑุณ**
- โ **ุงุญุฑุงุฒ ููุช ุงูู**
- โ **ููุงุด Token**
- โ **ฺฉูพ ฺฉุฑุฏู Token**
- โ **ุฐุฎุฑู ุฏุฑ localStorage**
- โ **ุฑุงูููุง ุงุณุชูุงุฏู**

### ูุญูู ุงุณุชูุงุฏู:
1. ุจู ุขุฏุฑุณ `/construction/api/login/` ุจุฑูุฏ
2. ูุงู ฺฉุงุฑุจุฑ ู ุฑูุฒ ุนุจูุฑ ุฑุง ูุงุฑุฏ ฺฉูุฏ
3. ุฑู ุฏฺฉูู "ูุฑูุฏ" ฺฉูฺฉ ฺฉูุฏ
4. Token ุฑุง ฺฉูพ ฺฉูุฏ
5. ุงุฒ Token ุจุฑุง ุฏุณุชุฑุณ ุจู API ุงุณุชูุงุฏู ฺฉูุฏ

## ๐ก ุงุณุชูุงุฏู ุงุฒ API

### ุขุฏุฑุณโูุง API:
```
Base URL: http://127.0.0.1:8000/construction/api/v1/
```

### Endpoint ูุง ุงุตู:
- **Projects**: `/api/v1/Project/`
- **Investors**: `/api/v1/Investor/`
- **Transactions**: `/api/v1/Transaction/`
- **Periods**: `/api/v1/Period/`
- **Expenses**: `/api/v1/Expense/`
- **Units**: `/api/v1/Unit/`
- **Interest Rates**: `/api/v1/InterestRate/`

### Endpoint ูุง ุงุญุฑุงุฒ ููุช:
- **ูุฑูุฏ**: `POST /api/v1/auth/login/`
- **ุฎุฑูุฌ**: `POST /api/v1/auth/logout/`
- **ุงุทูุงุนุงุช ฺฉุงุฑุจุฑ**: `GET /api/v1/auth/user/`
- **ุชุบุฑ ุฑูุฒ ุนุจูุฑ**: `POST /api/v1/auth/change-password/`
- **ูุถุนุช API**: `GET /api/v1/status/`

## ๐ก๏ธ ุงููุช API

### ูฺฺฏโูุง ุงููุช:
- โ **ุงุญุฑุงุฒ ููุช ุงุฌุจุงุฑ**: ููู API ูุง ูุงุฒ ุจู ูุฑูุฏ ุฏุงุฑูุฏ
- โ **Token Authentication**: ุงุณุชูุงุฏู ุงุฒ Token ุจุฑุง ุงุญุฑุงุฒ ููุช
- โ **Session Authentication**: ูพุดุชุจุงู ุงุฒ Session
- โ **ูุฌูุฒูุง ุณุทุญ**: ุฏุณุชุฑุณ ุจุฑ ุงุณุงุณ ููุด ฺฉุงุฑุจุฑ
- โ **ูุญุฏูุฏุช IP**: ุงูฺฉุงู ูุณุฏูุฏ ฺฉุฑุฏู IP ูุง ูุดฺฉูฺฉ
- โ **ุฑุฏุงุจ ูุนุงูุช**: ุซุจุช ุชูุงู ูุนุงูุชโูุง API
- โ **Rate Limiting**: ูุญุฏูุฏุช ูุฑุฎ ุฏุฑุฎูุงุณุช

### ุณุทูุญ ุฏุณุชุฑุณ:
1. **ุฎูุงูุฏู**: ููู ฺฉุงุฑุจุฑุงู ุงุญุฑุงุฒ ููุช ุดุฏู
2. **ููุดุชู**: ููุท ฺฉุงุฑุจุฑุงู staff
3. **ุงุฏูู**: ููุท superuser ูุง

## ๐ก ูุซุงูโูุง ุนูู

### 1. ูุฑูุฏ ุจู API
```bash
curl -X POST http://127.0.0.1:8000/construction/api/v1/auth/login/ \
  -H "Content-Type: application/json" \
  -d '{"username": "admin", "password": "your_password"}'
```

**ูพุงุณุฎ:**
```json
{
  "success": true,
  "message": "ูุฑูุฏ ููููุชโุขูุฒ",
  "token": "your_token_here",
  "user": {
    "id": 1,
    "username": "admin",
    "email": "admin@example.com",
    "is_staff": true,
    "is_superuser": true
  }
}
```

### 2. ุฏุฑุงูุช ูุณุช ูพุฑูฺูโูุง
```bash
curl -X GET http://127.0.0.1:8000/construction/api/v1/Project/ \
  -H "Authorization: Token your_token_here"
```

### 3. ุงุฌุงุฏ ูพุฑูฺู ุฌุฏุฏ
```bash
curl -X POST http://127.0.0.1:8000/construction/api/v1/Project/ \
  -H "Authorization: Token your_token_here" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "ูพุฑูฺู ุฌุฏุฏ",
    "start_date_shamsi": "1403-01-01",
    "end_date_shamsi": "1403-12-29"
  }'
```

### 4. ุฏุฑุงูุช ุขูุงุฑ ุชุฑุงฺฉูุดโูุง
```bash
curl -X GET http://127.0.0.1:8000/construction/api/v1/Transaction/statistics/ \
  -H "Authorization: Token your_token_here"
```

### 5. ุฎุฑูุฌ ุงุฒ API
```bash
curl -X POST http://127.0.0.1:8000/construction/api/v1/auth/logout/ \
  -H "Authorization: Token your_token_here"
```

## ๐ง ุชูุธูุงุช ุงููุช

### ุฏุฑ ูุงู `settings.py`:
```python
REST_FRAMEWORK = {
    'DEFAULT_AUTHENTICATION_CLASSES': [
        'rest_framework.authentication.SessionAuthentication',
        'rest_framework.authentication.TokenAuthentication',
    ],
    'DEFAULT_PERMISSION_CLASSES': [
        'rest_framework.permissions.IsAuthenticated',
    ],
}
```

### ูุฌูุฒูุง ุณูุงุฑุด:
- **APISecurityPermission**: ูุฌูุฒ ุงููุช ุงุตู
- **ReadOnlyPermission**: ููุท ุฎูุงูุฏู
- **AdminOnlyPermission**: ููุท ุงุฏููโูุง

## ๐ ูุธุงุฑุช ุงููุช

### ูุงฺฏโูุง ุงููุช:
- ุชูุงู ุฏุฑุฎูุงุณุชโูุง API ุซุจุช ูโุดููุฏ
- ุชูุงุดโูุง ูุฑูุฏ ูุงูููู ุฑุฏุงุจ ูโุดููุฏ
- ูุนุงูุชโูุง ูุดฺฉูฺฉ ุดูุงุณุง ูโุดููุฏ

### ุจุฑุฑุณ ูุงฺฏโูุง:
```bash
# ุจุฑุฑุณ ูุงฺฏโูุง ุงููุช
tail -f logs/security.log
```

## โ๏ธ ูฺฉุงุช ููู

### โ ฺฉุงุฑูุง ฺฉู ุจุงุฏ ุงูุฌุงู ุฏูุฏ:
1. **Token ุฑุง ูุญุฑูุงูู ูฺฏู ุฏุงุฑุฏ**
2. **ุงุฒ HTTPS ุฏุฑ production ุงุณุชูุงุฏู ฺฉูุฏ**
3. **Token ุฑุง ุจู ุตูุฑุช ููุธู ุชุฌุฏุฏ ฺฉูุฏ**
4. **ูุงฺฏโูุง ุฑุง ุจุฑุฑุณ ฺฉูุฏ**

### โ ฺฉุงุฑูุง ฺฉู ูุจุงุฏ ุงูุฌุงู ุฏูุฏ:
1. **Token ุฑุง ุฏุฑ ฺฉุฏ ูุฑุงุฑ ูุฏูุฏ**
2. **Token ุฑุง ุฏุฑ URL ูุฑุงุฑ ูุฏูุฏ**
3. **Token ุฑุง ุจุง ุฏฺฏุฑุงู ุจู ุงุดุชุฑุงฺฉ ูฺฏุฐุงุฑุฏ**
4. **ุงุฒ HTTP ุฏุฑ production ุงุณุชูุงุฏู ูฺฉูุฏ**

## ๐จ ุนุจโุงุจ

### ูุดฺฉู 1: "Authentication credentials were not provided"
**ุนูุช**: Token ุงุฑุณุงู ูุดุฏู ุงุณุช
**ุฑุงูโุญู**: Header `Authorization: Token your_token` ุฑุง ุงุถุงูู ฺฉูุฏ

### ูุดฺฉู 2: "Invalid token"
**ุนูุช**: Token ูุงูุนุชุจุฑ ุง ูููุถ ุดุฏู
**ุฑุงูโุญู**: ุฏูุจุงุฑู ูุงุฑุฏ ุดูุฏ ู token ุฌุฏุฏ ุฏุฑุงูุช ฺฉูุฏ

### ูุดฺฉู 3: "Permission denied"
**ุนูุช**: ฺฉุงุฑุจุฑ ุฏุณุชุฑุณ ูุงุฒู ุฑุง ูุฏุงุฑุฏ
**ุฑุงูโุญู**: ุจุง ฺฉุงุฑุจุฑ ุงุฏูู ูุงุฑุฏ ุดูุฏ

## ๐ฏ ุฎูุงุตู

### ุจุฑุง ุงุณุชูุงุฏู ุงุฒ API:
1. **ูุฑูุฏ**: ุจู `/construction/api/login/` ุจุฑูุฏ
2. **Token**: token ุฑุง ฺฉูพ ฺฉูุฏ
3. **ุงุณุชูุงุฏู**: token ุฑุง ุฏุฑ header ุฏุฑุฎูุงุณุชโูุง ูุฑุงุฑ ุฏูุฏ
4. **ุงููุช**: token ุฑุง ูุญุฑูุงูู ูฺฏู ุฏุงุฑุฏ

### ุขุฏุฑุณโูุง ููู:
- **ุตูุญู ูุงฺฏู**: `/construction/api/login/`
- **API Base**: `/construction/api/v1/`
- **ูุถุนุช API**: `/construction/api/v1/status/`

---

**๐ API ุงููุช ุดูุง ุขูุงุฏู ุงุณุช!**

ููู API ูุง ุญุงูุง ูุงุฒ ุจู ุงุญุฑุงุฒ ููุช ุฏุงุฑูุฏ ู ููุท ฺฉุงุฑุจุฑุงู ูุงฺฏู ฺฉุฑุฏู ูโุชูุงููุฏ ุจู ุขูโูุง ุฏุณุชุฑุณ ุฏุงุดุชู ุจุงุดูุฏ.
