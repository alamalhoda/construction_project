# ุฑุงูููุง ุณุณุชู ุจฺฉโุขูพ ุฎูุฏฺฉุงุฑ (Cron)

## ๐ ุฎูุงุตู

ุณุณุชู ุจฺฉโุขูพ ุฎูุฏฺฉุงุฑ ุจุง ุงุณุชูุงุฏู ุงุฒ **cron job** ูุฑ 6 ุณุงุนุช ฺฉุจุงุฑ ุจฺฉโุขูพ ฺฉุงูู ุงุฒ ุฏุชุงุจุณ ุงุฌุงุฏ ูโฺฉูุฏ.

## ๐ง ูุตุจ ู ุฑุงูโุงูุฏุงุฒ

### 1. ูุนุงู ฺฉุฑุฏู Cron ุงุฒ ุทุฑู UI
```bash
# ูุฑุงุฌุนู ุจู ุตูุญู ุชูุธูุงุช
http://localhost:8000/backup/settings/

# ฺฉูฺฉ ุฑู "ูุนุงู ฺฉุฑุฏู Cron"
```

### 2. ูุนุงู ฺฉุฑุฏู Cron ุงุฒ ุทุฑู ุฎุท ูุฑูุงู
```bash
# ุงุฌุฑุง ุงุณฺฉุฑูพุช ุชูุธู cron
./scripts/setup_cron.sh
```

### 3. ุจุฑุฑุณ ูุถุนุช Cron
```bash
# ูุดุงูุฏู cron jobs ูุนุงู
crontab -l

# ุฎุฑูุฌ ููููู:
# 0 */6 * * * /Users/alamalhoda/Projects/Arash_Project/djangobuilder/construction_project/scripts/run_auto_backup.sh
```

## โ๏ธ ุชูุธูุงุช

### ุชุบุฑ ูุงุตูู ุฒูุงู ุจฺฉโุขูพ

ุจุฑุง ุชุบุฑ ูุงุตูู ุฒูุงูุ ูุงู `scripts/setup_cron.sh` ุฑุง ูุฑุงุด ฺฉูุฏ:

```bash
# ูุฑ 6 ุณุงุนุช (ูพุดโูุฑุถ)
CRON_JOB="0 */6 * * * $BACKUP_SCRIPT"

# ูุฑ ุณุงุนุช
CRON_JOB="0 * * * * $BACKUP_SCRIPT"

# ูุฑ 12 ุณุงุนุช
CRON_JOB="0 */12 * * * $BACKUP_SCRIPT"

# ูุฑ ุฑูุฒ ุฏุฑ ุณุงุนุช 2 ุตุจุญ
CRON_JOB="0 2 * * * $BACKUP_SCRIPT"
```

### ูุฑูุช Cron
```
* * * * *
โ โ โ โ โ
โ โ โ โ โโโโ ุฑูุฒ ููุชู (0-7)
โ โ โ โโโโโโ ูุงู (1-12)
โ โ โโโโโโโโ ุฑูุฒ ูุงู (1-31)
โ โโโโโโโโโโ ุณุงุนุช (0-23)
โโโโโโโโโโโโ ุฏููู (0-59)
```

## ๐๏ธ ูุงูโูุง ุณุณุชู

### ุงุณฺฉุฑูพุชโูุง ุงุตู
- `scripts/run_auto_backup.sh` - ุงุณฺฉุฑูพุช ุงุฌุฑุง ุจฺฉโุขูพ
- `scripts/setup_cron.sh` - ุชูุธู cron job
- `scripts/remove_cron.sh` - ุญุฐู cron job

### Management Command
- `backup/management/commands/auto_backup.py` - Django command

### ูุงฺฏโูุง
- `logs/auto_backup.log` - ูุงฺฏ ุงุฌุฑุง ุจฺฉโุขูพโูุง ุฎูุฏฺฉุงุฑ

## ๐ ุนุจโุงุจ

### ุจุฑุฑุณ ุงุฌุฑุง Cron
```bash
# ุจุฑุฑุณ ูุงฺฏ ุณุณุชู cron
sudo tail -f /var/log/cron

# ุจุฑุฑุณ ูุงฺฏ ุจฺฉโุขูพ
tail -f logs/auto_backup.log
```

### ุชุณุช ุฏุณุช
```bash
# ุงุฌุฑุง ุฏุณุช ุจฺฉโุขูพ ุฎูุฏฺฉุงุฑ
python manage.py auto_backup --force

# ุงุฌุฑุง ุงุณฺฉุฑูพุช ุจฺฉโุขูพ
./scripts/run_auto_backup.sh
```

### ูุดฺฉูุงุช ุฑุงุฌ

#### 1. Cron ุงุฌุฑุง ููโุดูุฏ
```bash
# ุจุฑุฑุณ ูุฌูุฒูุง ูุงู
ls -la scripts/run_auto_backup.sh

# ุจุงุฏ ุฎุฑูุฌ ูุดุงุจู ุฒุฑ ุจุงุดุฏ:
# -rwxr-xr-x 1 user user 1234 Sep  2 21:00 scripts/run_auto_backup.sh
```

#### 2. ูุณุฑูุง ุงุดุชุจุงู
```bash
# ุจุฑุฑุณ ูุณุฑูุง ูุทูู ุฏุฑ ุงุณฺฉุฑูพุช
cat scripts/run_auto_backup.sh
```

#### 3. Virtual Environment
```bash
# ุงุทููุงู ุงุฒ ูุนุงู ุจูุฏู virtual environment
source env/bin/activate
which python
```

## ๐๏ธ ูุฏุฑุช

### ุบุฑูุนุงู ฺฉุฑุฏู Cron
```bash
# ุงุฒ ุทุฑู UI
http://localhost:8000/backup/settings/ โ "ุบุฑูุนุงู ฺฉุฑุฏู Cron"

# ุงุฒ ุทุฑู ุฎุท ูุฑูุงู
./scripts/remove_cron.sh
```

### ูุฑุงุด Cron Job
```bash
# ูุฑุงุด ูุณุชูู crontab
crontab -e

# ุญุฐู ุฎุท ูุฑุจูุท ุจู ุจฺฉโุขูพ ู ุฐุฎุฑู
```

### ูพุงฺฉโุณุงุฒ ูุงฺฏโูุง
```bash
# ูพุงฺฉ ฺฉุฑุฏู ูุงฺฏ ูุฏู
> logs/auto_backup.log
```

## ๐ ูุธุงุฑุช

### ุจุฑุฑุณ ุขูุงุฑ ุจฺฉโุขูพโูุง
```bash
# ุงุฒ ุทุฑู UI
http://localhost:8000/backup/list/

# ุงุฒ ุทุฑู ุฎุท ูุฑูุงู
python manage.py shell
>>> from backup.models import BackupRecord
>>> BackupRecord.objects.filter(backup_type='automatic').count()
```

### ุจุฑุฑุณ ุญุฌู ุจฺฉโุขูพโูุง
```bash
# ุญุฌู ฺฉู ูพูุดู backups
du -sh backups/

# ุญุฌู ูุฑ ุจฺฉโุขูพ
du -sh backups/backup_*
```

## ๐ ุงููุช

### ูุฌูุฒูุง ูุงู
```bash
# ุชูุธู ูุฌูุฒูุง ููุงุณุจ
chmod 755 scripts/*.sh
chmod 644 logs/auto_backup.log
```

### ูพุดุชุจุงูโฺฏุฑ ุงุฒ Cron
```bash
# ุฐุฎุฑู ุชูุธูุงุช cron ูุนู
crontab -l > backup_cron.txt
```

## ๐ ูฺฉุงุช ููู

1. **ุณุฑูุฑ ุจุงุฏ ุฑูุดู ุจุงุดุฏ** - Cron ููุท ุฒูุงู ฺฉุงุฑ ูโฺฉูุฏ ฺฉู ุณุณุชู ุฑูุดู ุจุงุดุฏ
2. **Virtual Environment** - ุงุณฺฉุฑูพุช ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ virtual environment ุฑุง ูุนุงู ูโฺฉูุฏ
3. **ูุถุง ุฏุณฺฉ** - ุงุทููุงู ุงุฒ ูุฌูุฏ ูุถุง ฺฉุงู ุจุฑุง ุจฺฉโุขูพโูุง
4. **ูพุงฺฉโุณุงุฒ ุฎูุฏฺฉุงุฑ** - ุณุณุชู ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุจฺฉโุขูพโูุง ูุฏู ุฑุง ุญุฐู ูโฺฉูุฏ

## ๐ ูพุดุชุจุงู

ุฏุฑ ุตูุฑุช ุจุฑูุฒ ูุดฺฉู:
1. ุจุฑุฑุณ ูุงฺฏโูุง
2. ุชุณุช ุฏุณุช ุงุณฺฉุฑูพุชโูุง
3. ุจุฑุฑุณ ูุฌูุฒูุง ูุงูโูุง
4. ุงุทููุงู ุงุฒ ูุนุงู ุจูุฏู virtual environment
