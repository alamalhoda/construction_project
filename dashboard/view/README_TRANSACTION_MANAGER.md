# راهنمای صفحه مدیریت تراکنش‌های مالی

## معرفی
صفحه `transaction_manager.html` یک رابط کاربری مدرن و کامل برای مدیریت تراکنش‌های مالی سرمایه‌گذاران است. این صفحه با استفاده از Tabulator و Semantic UI طراحی شده و قابلیت‌های پیشرفته‌ای برای مدیریت داده‌ها ارائه می‌دهد.

## ویژگی‌های اصلی

### 1. نمایش داده‌ها
- **جدول تعاملی**: نمایش تراکنش‌ها در قالب جدول با قابلیت مرتب‌سازی
- **رنگ‌بندی**: تراکنش‌های مختلف با رنگ‌های متفاوت نمایش داده می‌شوند
- **صفحه‌بندی**: نمایش داده‌ها در صفحات مختلف برای عملکرد بهتر

### 2. فیلترها و جستجو
- **فیلتر سرمایه‌گذار**: انتخاب سرمایه‌گذار خاص
- **فیلتر نوع تراکنش**: واریز، برداشت، سود
- **فیلتر دوره**: انتخاب دوره زمانی خاص
- **فیلتر پروژه**: انتخاب پروژه خاص
- **جستجوی متنی**: جستجو در تمام فیلدها

### 3. آمار و خلاصه
- **کل تراکنش‌ها**: تعداد کل تراکنش‌ها
- **مجموع واریزها**: مجموع مبالغ واریز شده
- **مجموع برداشت‌ها**: مجموع مبالغ برداشت شده
- **مجموع سود**: مجموع سودهای تعلق گرفته
- **سرمایه‌گذاران فعال**: تعداد سرمایه‌گذاران منحصر به فرد

### 4. عملیات CRUD
- **افزودن تراکنش جدید**: فرم کامل برای افزودن تراکنش
- **ویرایش تراکنش**: امکان ویرایش تراکنش‌های موجود
- **حذف تراکنش**: حذف تراکنش با تأیید

### 5. صادرات داده
- **دانلود CSV**: صادرات داده‌ها به فرمت CSV
- **دانلود JSON**: صادرات داده‌ها به فرمت JSON

## ساختار فایل

### HTML Structure
```html
- Header Section (عنوان و لینک‌های ناوبری)
- Statistics Cards (کارت‌های آمار)
- Controls Section (فیلترها و دکمه‌ها)
- Table Container (جدول تراکنش‌ها)
- Modals (فرم‌های افزودن و ویرایش)
```

### JavaScript Functions
- `loadInitialData()`: بارگذاری داده‌های اولیه
- `createTable()`: ایجاد جدول Tabulator
- `applyFilters()`: اعمال فیلترها
- `updateStats()`: بروزرسانی آمار
- `addNewTransaction()`: افزودن تراکنش جدید
- `editTransaction()`: ویرایش تراکنش
- `deleteTransaction()`: حذف تراکنش

## API Endpoints

### تراکنش‌ها
- `GET /api/transactions/` - دریافت لیست تراکنش‌ها
- `POST /api/transactions/` - افزودن تراکنش جدید
- `PUT /api/transactions/{id}/` - ویرایش تراکنش
- `DELETE /api/transactions/{id}/` - حذف تراکنش
- `GET /api/transactions/statistics/` - آمار کلی تراکنش‌ها

### سایر داده‌ها
- `GET /api/investors/` - لیست سرمایه‌گذاران
- `GET /api/projects/` - لیست پروژه‌ها
- `GET /api/periods/` - لیست دوره‌ها

## نحوه استفاده

### 1. بارگذاری صفحه
صفحه به طور خودکار داده‌ها را از API بارگذاری می‌کند.

### 2. فیلتر کردن داده‌ها
- از منوهای کشویی برای انتخاب فیلترها استفاده کنید
- از جعبه جستجو برای جستجوی متنی استفاده کنید
- دکمه "پاک کردن فیلترها" برای بازنشانی فیلترها

### 3. افزودن تراکنش جدید
- روی دکمه "افزودن تراکنش جدید" کلیک کنید
- فرم را پر کنید
- روی "ذخیره تراکنش" کلیک کنید

### 4. ویرایش تراکنش
- روی دکمه ویرایش (آیکون قلم) کلیک کنید
- تغییرات را اعمال کنید
- روی "بروزرسانی تراکنش" کلیک کنید

### 5. حذف تراکنش
- روی دکمه حذف (آیکون سطل زباله) کلیک کنید
- تأیید کنید

## طراحی ریسپانسیو

صفحه برای استفاده در دستگاه‌های مختلف بهینه‌سازی شده است:
- **دسکتاپ**: نمایش کامل با تمام ویژگی‌ها
- **تبلت**: تنظیم خودکار اندازه‌ها
- **موبایل**: چیدمان عمودی و دکمه‌های بزرگ‌تر

## رنگ‌بندی تراکنش‌ها

- **واریز اصل**: سبز کمرنگ
- **برداشت اصل**: قرمز کمرنگ  
- **سود**: آبی کمرنگ

## نکات فنی

### Dependencies
- Tabulator 5.5.2
- Semantic UI 2.5.0
- Font Awesome 6.4.0
- Persian Datepicker
- jQuery 3.6.0

### Browser Support
- Chrome (توصیه شده)
- Firefox
- Safari
- Edge

### Performance
- صفحه‌بندی داده‌ها برای عملکرد بهتر
- فیلتر کردن سمت کلاینت
- کش کردن داده‌ها در حافظه

## عیب‌یابی

### مشکلات رایج
1. **خطا در بارگذاری داده‌ها**: بررسی اتصال به سرور و API
2. **عدم نمایش فیلترها**: بررسی بارگذاری کامل JavaScript
3. **خطا در افزودن تراکنش**: بررسی پر کردن تمام فیلدهای اجباری

### لاگ‌ها
برای عیب‌یابی، کنسول مرورگر را بررسی کنید.

## توسعه آینده

### ویژگی‌های پیشنهادی
- نمودارهای آماری
- گزارش‌های پیشرفته
- فیلترهای تاریخ
- گروه‌بندی داده‌ها
- چاپ گزارش‌ها

### بهبودهای فنی
- بهینه‌سازی عملکرد
- کش کردن پیشرفته
- WebSocket برای بروزرسانی زنده
- PWA support
