{% extends "base.html" %}
{% load static %}
{% load jformat %}
{% block content %}
    
<p>
    <a class="btn btn-light" href="{% url 'construction_Transaction_list' %}">
    ‏فهرست تراکنش‌ها
    </a>
</p>

{% if error_message %}
    <div class="alert alert-danger">
        <i class="fas fa-exclamation-triangle"></i>
        {{ error_message }}
        <br>
        <a href="{% url 'construction_active_project' %}" class="btn btn-warning btn-sm mt-2">
            <i class="fas fa-cog"></i>
            تنظیم پروژه فعال
        </a>
    </div>
{% elif active_project %}
    <div class="alert alert-info">
        <i class="fas fa-info-circle"></i>
        <strong>پروژه فعال:</strong> {{ active_project.name }}
        <small class="text-muted">(این تراکنش به صورت خودکار به این پروژه اضافه خواهد شد)</small>
    </div>
{% endif %}
    
<form method="post" enctype="multipart/form-data">
  {% csrf_token %}
  
  {% if form.errors %}
    <div class="alert alert-danger">
      {{ form.errors }}
    </div>
  {% endif %}
  
  <div class="form-group row">
      <label class="col-sm-3 col-form-label" for="{{ form.date_shamsi.id_for_label }}">{{ form.date_shamsi.label }}: </label>
      <div class="col-sm-9">
        {{ form.date_shamsi }}
      </div>
  </div>
  
  <div class="form-group row">
      <label class="col-sm-3 col-form-label" for="{{ form.date_gregorian.id_for_label }}">{{ form.date_gregorian.label }}: </label>
      <div class="col-sm-9">
        {{ form.date_gregorian }}
      </div>
  </div>
  
  <div class="form-group row">
      <label class="col-sm-3 col-form-label" for="{{ form.amount.id_for_label }}">{{ form.amount.label }}: </label>
      <div class="col-sm-9">
        {{ form.amount }}
      </div>
  </div>
  
  <div class="form-group row">
      <label class="col-sm-3 col-form-label" for="{{ form.transaction_type.id_for_label }}">{{ form.transaction_type.label }}: </label>
      <div class="col-sm-9">
        {{ form.transaction_type }}
      </div>
  </div>
  
  <div class="form-group row">
      <label class="col-sm-3 col-form-label" for="{{ form.description.id_for_label }}">{{ form.description.label }}: </label>
      <div class="col-sm-9">
        {{ form.description }}
      </div>
  </div>
  
  <div class="form-group row">
      <div class="col-sm-12">
        <input type="submit" value="ذخیره" class="btn btn-primary">
        <a href="{% url 'construction_Transaction_list' %}" class="btn btn-secondary">انصراف</a>
      </div>
  </div>
</form>

{% endblock %}