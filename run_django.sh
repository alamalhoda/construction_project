#!/bin/bash

# ุงุณฺฉุฑูพุช ุงุฌุฑุง ุฏุณุชูุฑุงุช Django ุจุง ูุนุงูโุณุงุฒ ุฎูุฏฺฉุงุฑ ูุญุท ูุฌุงุฒ
# ุงุณุชูุงุฏู: ./run_django.sh [ุฏุณุชูุฑุงุช Django]
# ูุซุงู: ./run_django.sh migrate construction

# ุจุฑุฑุณ ูุฌูุฏ ูุญุท ูุฌุงุฒ
if [ ! -d "env" ]; then
    echo "โ ูพูุดู ูุญุท ูุฌุงุฒ (env) ุงูุช ูุดุฏ!"
    echo "ูุทูุงู ุงุจุชุฏุง ูุญุท ูุฌุงุฒ ุฑุง ุงุฌุงุฏ ฺฉูุฏ:"
    echo "python3 -m venv env"
    exit 1
fi

# ุจุฑุฑุณ ูุนุงู ุจูุฏู ูุญุท ูุฌุงุฒ
if [ -z "$VIRTUAL_ENV" ]; then
    echo "๐ ูุนุงูโุณุงุฒ ูุญุท ูุฌุงุฒ..."
    source env/bin/activate
    echo "โ ูุญุท ูุฌุงุฒ ูุนุงู ุดุฏ"
else
    echo "โ ูุญุท ูุฌุงุฒ ูุจูุงู ูุนุงู ุงุณุช"
fi

# ุงุฌุฑุง ุฏุณุชูุฑุงุช Django
echo "๐ ุงุฌุฑุง ุฏุณุชูุฑ: python3 manage.py $@"
python3 manage.py "$@"
