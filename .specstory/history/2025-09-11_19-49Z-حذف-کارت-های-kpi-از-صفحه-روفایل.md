<!-- Generated by SpecStory -->

<!-- cursor Session c0d0efd9-3e14-4b3a-9458-7532be37c647 (2025-09-11 19:49Z) -->

# حذف کارت های kpi از صفحه روفایل (2025-09-11 19:49Z)

_**User (2025-09-11 16:09Z)**_

در صفحه روفایل سرمایه گذاران ۴عدد کارت مربوط یه kpi  وکدهای جاوااسکریپت مربوط به آنها حذف شود

---

_**Assistant (default)**_

من کارت‌های KPI و کدهای جاوااسکریپت مربوط به آنها را از صفحه پروفایل سرمایه‌گذاران حذف می‌کنم. ابتدا فایل را بررسی می‌کنم تا تمام بخش‌های مربوطه را شناسایی کنم.


---

Tool use: **read_file**

Read file: /Users/alamalhoda/Projects/Arash_Project/djangobuilder/construction_project/dashboard/view/investor_profile.html

---

حالا من کارت‌های KPI و کدهای جاوااسکریپت مربوط به آنها را حذف می‌کنم:


---

Tool use: **todo_write**

## Todo List

- [-] حذف کارت‌های KPI از HTML
- [ ] حذف استایل‌های CSS مربوط به کارت‌های KPI
- [ ] حذف توابع جاوااسکریپت مربوط به کارت‌های KPI

---

Tool use: **search_replace**


<details><summary>Edit file: /Users/alamalhoda/Projects/Arash_Project/djangobuilder/construction_project/dashboard/view/investor_profile.html</summary>

**Chunk 1**
Lines added: undefined, lines removed: 62

```diff
@@ -978,66 +978,4 @@
  
          <div id="investorInfo" class="investor-info">
-             <!-- KPI Cards -->
-             <div class="kpi-container" id="kpiContainer">
-                 <div class="kpi-card neutral" id="kpiPrincipal">
-                     <div class="kpi-header">
-                         <div class="kpi-icon">
-                             <i class="fas fa-coins"></i>
-                         </div>
-                         <h4 class="kpi-title">کل سرمایه</h4>
-                     </div>
-                     <div class="kpi-value" id="kpiPrincipalValue">0</div>
-                     <p class="kpi-subtitle">کرور تومان</p>
-                     <div class="kpi-trend neutral" id="kpiPrincipalTrend">
-                         <i class="fas fa-minus"></i>
-                         <span>آماده محاسبه</span>
-                     </div>
-                 </div>
- 
-                 <div class="kpi-card neutral" id="kpiProfit">
-                     <div class="kpi-header">
-                         <div class="kpi-icon">
-                             <i class="fas fa-chart-line"></i>
-                         </div>
-                         <h4 class="kpi-title">کل سود</h4>
-                     </div>
-                     <div class="kpi-value" id="kpiProfitValue">0</div>
-                     <p class="kpi-subtitle">کرور تومان</p>
-                     <div class="kpi-trend neutral" id="kpiProfitTrend">
-                         <i class="fas fa-minus"></i>
-                         <span>آماده محاسبه</span>
-                     </div>
-                 </div>
- 
-                 <div class="kpi-card neutral" id="kpiROI">
-                     <div class="kpi-header">
-                         <div class="kpi-icon">
-                             <i class="fas fa-percentage"></i>
-                         </div>
-                         <h4 class="kpi-title">نرخ بازدهی</h4>
-                     </div>
-                     <div class="kpi-value" id="kpiROIValue">0</div>
-                     <p class="kpi-subtitle">درصد</p>
-                     <div class="kpi-trend neutral" id="kpiROITrend">
-                         <i class="fas fa-minus"></i>
-                         <span>آماده محاسبه</span>
-                     </div>
-                 </div>
- 
-                 <div class="kpi-card neutral" id="kpiBalance">
-                     <div class="kpi-header">
-                         <div class="kpi-icon">
-                             <i class="fas fa-wallet"></i>
-                         </div>
-                         <h4 class="kpi-title">موجودی کل</h4>
-                     </div>
-                     <div class="kpi-value" id="kpiBalanceValue">0</div>
-                     <p class="kpi-subtitle">کرور تومان</p>
-                     <div class="kpi-trend neutral" id="kpiBalanceTrend">
-                         <i class="fas fa-minus"></i>
-                         <span>آماده محاسبه</span>
-                     </div>
-                 </div>
-             </div>
  
              <div class="investor-header">
```

</details>

---

Tool use: **todo_write**

## Todo List

- [x] حذف کارت‌های KPI از HTML
- [-] حذف استایل‌های CSS مربوط به کارت‌های KPI
- [ ] حذف توابع جاوااسکریپت مربوط به کارت‌های KPI

---

حالا استایل‌های CSS مربوط به کارت‌های KPI را حذف می‌کنم:


---

Tool use: **search_replace**


<details><summary>Edit file: /Users/alamalhoda/Projects/Arash_Project/djangobuilder/construction_project/dashboard/view/investor_profile.html</summary>

**Chunk 1**
Lines added: undefined, lines removed: 131

```diff
@@ -475,135 +475,4 @@
          }
  
-         /* KPI Cards Styles */
-         .kpi-container {
-             display: grid;
-             grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
-             gap: 20px;
-             margin-bottom: 30px;
-             opacity: 0;
-             transform: translateY(20px);
-             transition: all 0.6s ease;
-         }
- 
-         .kpi-container.show {
-             opacity: 1;
-             transform: translateY(0);
-         }
- 
-         .kpi-card {
-             background: var(--bg-card);
-             border: 1px solid var(--border-color);
-             border-radius: 16px;
-             padding: 24px;
-             box-shadow: var(--shadow-md);
-             transition: all 0.3s ease;
-             position: relative;
-             overflow: hidden;
-         }
- 
-         .kpi-card:hover {
-             transform: translateY(-5px);
-             box-shadow: var(--shadow-lg);
-         }
- 
-         .kpi-card::before {
-             content: '';
-             position: absolute;
-             top: 0;
-             left: 0;
-             right: 0;
-             height: 4px;
-             background: var(--card-color, #6c757d);
-             transition: all 0.3s ease;
-         }
- 
-         .kpi-card.positive {
-             --card-color: var(--success-color);
-         }
- 
-         .kpi-card.negative {
-             --card-color: var(--danger-color);
-         }
- 
-         .kpi-card.neutral {
-             --card-color: var(--text-secondary);
-         }
- 
-         .kpi-card.warning {
-             --card-color: var(--warning-color);
-         }
- 
-         .kpi-header {
-             display: flex;
-             align-items: center;
-             justify-content: space-between;
-             margin-bottom: 16px;
-         }
- 
-         .kpi-icon {
-             width: 48px;
-             height: 48px;
-             border-radius: 12px;
-             display: flex;
-             align-items: center;
-             justify-content: center;
-             font-size: 20px;
-             color: white;
-             background: var(--card-color, #6c757d);
-             box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
-         }
- 
-         .kpi-title {
-             color: var(--text-secondary);
-             font-size: 14px;
-             font-weight: 500;
-             margin: 0;
-         }
- 
-         .kpi-value {
-             font-size: 32px;
-             font-weight: 700;
-             color: var(--text-primary);
-             margin: 8px 0;
-             direction: ltr;
-             text-align: right;
-         }
- 
-         .kpi-subtitle {
-             color: var(--text-muted);
-             font-size: 12px;
-             margin: 0;
-         }
- 
-         .kpi-trend {
-             display: flex;
-             align-items: center;
-             gap: 6px;
-             margin-top: 8px;
-             font-size: 12px;
-             font-weight: 500;
-         }
- 
-         .kpi-trend.positive {
-             color: #28a745;
-         }
- 
-         .kpi-trend.negative {
-             color: #dc3545;
-         }
- 
-         .kpi-trend.neutral {
-             color: #6c757d;
-         }
- 
-         /* Counter Animation */
-         @keyframes countUp {
-             from { opacity: 0; transform: translateY(10px); }
-             to { opacity: 1; transform: translateY(0); }
-         }
- 
-         .kpi-value.animate {
-             animation: countUp 0.8s ease-out;
-         }
  
          /* Advanced Layout & Grid System */
```

</details>

---

حالا بخش‌های CSS مربوط به KPI در responsive design را نیز حذف می‌کنم:


---

Tool use: **search_replace**


<details><summary>Edit file: /Users/alamalhoda/Projects/Arash_Project/djangobuilder/construction_project/dashboard/view/investor_profile.html</summary>

**Chunk 1**
Lines added: undefined, lines removed: 4

```diff
@@ -660,8 +660,4 @@
              }
              
-             .kpi-container {
-                 grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
-                 gap: 16px;
-             }
              
              .stats-grid {
```

</details>

---

Tool use: **search_replace**


<details><summary>Edit file: /Users/alamalhoda/Projects/Arash_Project/djangobuilder/construction_project/dashboard/view/investor_profile.html</summary>

**Chunk 1**
Lines added: undefined, lines removed: 3

```diff
@@ -681,7 +681,4 @@
              }
              
-             .kpi-container {
-                 grid-template-columns: 1fr;
-             }
              
              .chart-title {
```

</details>

---

Tool use: **todo_write**

## Todo List

- [x] حذف کارت‌های KPI از HTML
- [x] حذف استایل‌های CSS مربوط به کارت‌های KPI
- [-] حذف توابع جاوااسکریپت مربوط به کارت‌های KPI

---

حالا توابع جاوااسکریپت مربوط به کارت‌های KPI را حذف می‌کنم:


---

Tool use: **search_replace**


<details><summary>Edit file: /Users/alamalhoda/Projects/Arash_Project/djangobuilder/construction_project/dashboard/view/investor_profile.html</summary>

**Chunk 1**
Lines added: 1, lines removed: 74

```diff
@@ -1269,78 +1269,5 @@
          }
  
-         // تابع آپدیت کارت‌های KPI
-         function updateKPICards(investorTransactions) {
-             // محاسبه مقادیر
-             const principalData = getTransactionsByType(investorTransactions, 'principal_deposit');
-             const withdrawalData = getTransactionsByType(investorTransactions, 'principal_withdrawal');
-             const profitData = getTransactionsByType(investorTransactions, 'profit_accrual');
- 
-             const totalPrincipal = principalData.reduce((sum, row) => sum + parseFloat(row.amount || 0), 0);
-             const totalWithdrawal = withdrawalData.reduce((sum, row) => sum + parseFloat(row.amount || 0), 0);
-             const totalProfit = profitData.reduce((sum, row) => sum + parseFloat(row.amount || 0), 0);
-             
-             const netPrincipal = totalPrincipal + totalWithdrawal;
-             const totalBalance = netPrincipal + totalProfit;
-             const profitRatio = netPrincipal > 0 ? ((totalProfit / netPrincipal) * 100) : 0;
- 
-             // آپدیت کارت کل سرمایه
-             updateKPICard('kpiPrincipal', 'kpiPrincipalValue', 'kpiPrincipalTrend', 
-                 totalPrincipal / BASE_AMOUNT, netPrincipal > 0 ? 'positive' : 'neutral', 
-                 `سرمایه خالص: ${(netPrincipal / BASE_AMOUNT).toFixed(1)} کرور`);
- 
-             // آپدیت کارت کل سود
-             updateKPICard('kpiProfit', 'kpiProfitValue', 'kpiProfitTrend', 
-                 totalProfit / BASE_AMOUNT, totalProfit > 0 ? 'positive' : totalProfit < 0 ? 'negative' : 'neutral', 
-                 totalProfit > 0 ? 'سودآور' : totalProfit < 0 ? 'ضررده' : 'بدون سود');
- 
-             // آپدیت کارت نرخ بازدهی
-             updateKPICard('kpiROI', 'kpiROIValue', 'kpiROITrend', 
-                 profitRatio, profitRatio > 0 ? 'positive' : profitRatio < 0 ? 'negative' : 'neutral', 
-                 `${profitRatio > 0 ? 'بازدهی مثبت' : profitRatio < 0 ? 'بازدهی منفی' : 'بدون بازدهی'}`, '%');
- 
-             // آپدیت کارت موجودی کل
-             updateKPICard('kpiBalance', 'kpiBalanceValue', 'kpiBalanceTrend', 
-                 totalBalance / BASE_AMOUNT, totalBalance > 0 ? 'positive' : totalBalance < 0 ? 'negative' : 'neutral', 
-                 `شامل سود: ${(totalProfit / BASE_AMOUNT).toFixed(1)} کرور`);
- 
-             // نمایش کارت‌ها با انیمیشن
-             setTimeout(() => {
-                 document.getElementById('kpiContainer').classList.add('show');
-             }, 100);
-         }
- 
-         // تابع کمکی برای آپدیت یک کارت KPI
-         function updateKPICard(cardId, valueId, trendId, value, status, trendText, suffix = '') {
-             const card = document.getElementById(cardId);
-             const valueElement = document.getElementById(valueId);
-             const trendElement = document.getElementById(trendId);
- 
-             // آپدیت وضعیت کارت
-             card.className = `kpi-card ${status}`;
- 
-             // آپدیت مقدار با انیمیشن
-             valueElement.classList.add('animate');
-             if (suffix === '%') {
-                 valueElement.textContent = value.toFixed(1) + '%';
-             } else {
-                 valueElement.textContent = value.toFixed(1);
-             }
- 
-             // آپدیت trend
-             trendElement.className = `kpi-trend ${status}`;
-             
-             let icon = 'fas fa-minus';
-             if (status === 'positive') icon = 'fas fa-arrow-up';
-             else if (status === 'negative') icon = 'fas fa-arrow-down';
-             else if (status === 'warning') icon = 'fas fa-exclamation-triangle';
- 
-             trendElement.innerHTML = `<i class="${icon}"></i><span>${trendText}</span>`;
- 
-             // حذف کلاس انیمیشن بعد از مدتی
-             setTimeout(() => {
-                 valueElement.classList.remove('animate');
-             }, 800);
-         }
-         
+         
  
          // تابع loadData() حذف شد چون دیگر نیازی نیست
```

</details>

---

حالا باید فراخوانی تابع `updateKPICards` را از کد جاوااسکریپت حذف کنم:


---

Tool use: **search_replace**


<details><summary>Edit file: /Users/alamalhoda/Projects/Arash_Project/djangobuilder/construction_project/dashboard/view/investor_profile.html</summary>

**Chunk 1**
Lines added: 1, lines removed: 4

```diff
@@ -1456,8 +1456,5 @@
                  .then(investorTransactions => {
                      if (investorTransactions && investorTransactions.length > 0) {
-                         // ابتدا کارت‌های KPI را آپدیت کنیم
-                         updateKPICards(investorTransactions);
-                         
-                         // سپس اطلاعات تفصیلی را به‌روزرسانی کنیم
+                         // اطلاعات تفصیلی را به‌روزرسانی کنیم
                          updateInvestorInfoWithData(investorId, investorTransactions);
                          
```

</details>

---

Tool use: **todo_write**

## Todo List

- [x] حذف کارت‌های KPI از HTML
- [x] حذف استایل‌های CSS مربوط به کارت‌های KPI
- [x] حذف توابع جاوااسکریپت مربوط به کارت‌های KPI

---

حالا بررسی می‌کنم که آیا خطایی در فایل وجود دارد:


---

Tool use: **read_lints**

<details>
          <summary>Read lints for 1 file</summary>
      
Lint paths:

- `/Users/alamalhoda/Projects/Arash_Project/djangobuilder/construction_project/dashboard/view/investor_profile.html`

Lint results


**No lint errors found**
</details>

---

عالی! کارت‌های KPI و کدهای جاوااسکریپت مربوط به آنها با موفقیت از صفحه پروفایل سرمایه‌گذاران حذف شدند. 

## خلاصه تغییرات انجام شده:

✅ **کارت‌های KPI حذف شدند:**
- ۴ کارت KPI شامل: کل سرمایه، کل سود، نرخ بازدهی، و موجودی کل
- تمام عناصر HTML مربوط به این کارت‌ها

✅ **استایل‌های CSS حذف شدند:**
- استایل‌های `.kpi-container`، `.kpi-card`، `.kpi-header` و سایر کلاس‌های مربوطه
- انیمیشن‌های مربوط به کارت‌ها
- استایل‌های responsive برای کارت‌های KPI

✅ **توابع جاوااسکریپت حذف شدند:**
- تابع `updateKPICards()` 
- تابع `updateKPICard()`
- فراخوانی این توابع از کد اصلی

صفحه پروفایل سرمایه‌گذاران حالا بدون کارت‌های KPI کار می‌کند و فقط نمودارها و اطلاعات تفصیلی سرمایه‌گذاران را نمایش می‌دهد.

---

_**User (2025-09-11 16:09Z)**_

نموددار ROI رو حذف کن

---

_**Assistant (default)**_

من نمودار ROI را از صفحه پروفایل سرمایه‌گذاران حذف می‌کنم.


---

Tool use: **todo_write**

## Todo List

- [-] حذف نمودار ROI از HTML
- [ ] حذف تابع createROIChart از جاوااسکریپت
- [ ] حذف فراخوانی createROIChart از کد اصلی

---

ابتدا بخش HTML نمودار ROI را حذف می‌کنم:


---

Tool use: **search_replace**


<details><summary>Edit file: /Users/alamalhoda/Projects/Arash_Project/djangobuilder/construction_project/dashboard/view/investor_profile.html</summary>

**Chunk 1**
Lines added: undefined, lines removed: 31

```diff
@@ -875,35 +875,4 @@
              <!-- Charts Section with New Grid Layout -->
              <div class="charts-grid">
-                 <!-- ROI Chart - Featured -->
-                 <div class="chart-container featured">
-                     <div class="chart-header">
-                         <h3 class="chart-title">
-                             <i class="fas fa-percentage"></i>
-                             نرخ بازدهی (ROI) در طول زمان
-                         </h3>
-                         <div class="chart-actions">
-                         </div>
-                     </div>
-                     <!-- Simple Chart Controls -->
-                     <div class="simple-chart-controls">
-                         <button class="simple-control-btn" onclick="collapseChart('roiChart')" title="جمع/باز کردن">
-                             <i class="fas fa-chevron-up"></i>
-                         </button>
-                         <button class="simple-control-btn" onclick="simpleToggleChart('roiChart')" title="مخفی/نمایش">
-                             <i class="fas fa-eye"></i>
-                         </button>
-                         <button class="simple-control-btn" onclick="simpleResizeChart('roiChart')" title="بزرگ/کوچک">
-                             <i class="fas fa-expand-alt"></i>
-                         </button>
-                     </div>
-                     </div>
-                     <div class="chart-wrapper">
-                         <canvas id="roiChart"></canvas>
-                     </div>
-                     <div style="margin-top: 10px; padding: 10px; background: var(--bg-secondary); border-radius: 8px; font-size: 12px; color: var(--text-secondary);">
-                         <strong>توضیح:</strong> نرخ بازدهی (ROI) نشان می‌دهد که تا هر ماه چند درصد از سرمایه اولیه به عنوان سود کسب شده است.
-                         <br><strong>فرمول:</strong> ROI = (مجموع سود تا آن ماه ÷ مجموع سرمایه تا آن ماه) × 100
-                     </div>
-             </div>
  
                  <!-- Principal Transaction Chart -->
```

</details>

---

Tool use: **todo_write**

## Todo List

- [x] حذف نمودار ROI از HTML
- [-] حذف تابع createROIChart از جاوااسکریپت
- [ ] حذف فراخوانی createROIChart از کد اصلی

---

حالا تابع `createROIChart` را از جاوااسکریپت حذف می‌کنم:


---

Tool use: **search_replace**


<details><summary>Edit file: /Users/alamalhoda/Projects/Arash_Project/djangobuilder/construction_project/dashboard/view/investor_profile.html</summary>

**Chunk 1**
Lines added: undefined, lines removed: 125

```diff
@@ -2111,129 +2111,4 @@
          }
  
-         // نمودار نرخ بازدهی (ROI) در طول زمان
-         function createROIChart(investorTransactions) {
-             // گروه‌بندی تراکنش‌ها بر اساس ماه
-             const monthlyData = {};
-             investorTransactions.forEach(row => {
-                 if (row.date_shamsi) {
-                     const month = row.date_shamsi.substring(0, 7); // YYYY-MM
-                     if (!monthlyData[month]) {
-                         monthlyData[month] = { principal: 0, profit: 0 };
-                     }
-                     
-                     const amount = parseFloat(row.amount || 0);
-                     if (row.entry_type === 'principal_deposit') {
-                         monthlyData[month].principal += amount;
-                     } else if (row.entry_type === 'principal_withdrawal') {
-                         monthlyData[month].principal += amount; // withdrawal معمولاً منفی است
-                     } else if (row.entry_type === 'profit_accrual') {
-                         monthlyData[month].profit += amount;
-                     }
-                 }
-             });
- 
-             const months = Object.keys(monthlyData).sort();
-             
-             // محاسبه ROI تجمعی برای هر ماه
-             const roiData = [];
-             const monthLabels = [];
-             let cumulativePrincipal = 0;
-             let cumulativeProfit = 0;
-             
-             months.forEach(month => {
-                 cumulativePrincipal += monthlyData[month].principal;
-                 cumulativeProfit += monthlyData[month].profit;
-                 
-                 // محاسبه ROI فقط اگر سرمایه مثبت باشد
-                 let roi = 0;
-                 if (cumulativePrincipal > 0) {
-                     roi = (cumulativeProfit / cumulativePrincipal) * 100;
-                 }
-                 
-                 roiData.push(roi);
-                 monthLabels.push(month);
-             });
- 
-             const ctx = document.getElementById('roiChart').getContext('2d');
-             charts.roiChart = new Chart(ctx, {
-                 type: 'line',
-                 data: {
-                     labels: monthLabels,
-                     datasets: [
-                         {
-                             label: 'نرخ بازدهی (ROI %)',
-                             data: roiData,
-                             borderColor: 'rgba(75, 192, 192, 1)',
-                             backgroundColor: 'rgba(75, 192, 192, 0.2)',
-                             borderWidth: 3,
-                             fill: true,
-                             tension: 0.4,
-                             pointBackgroundColor: 'rgba(75, 192, 192, 1)',
-                             pointBorderColor: '#fff',
-                             pointBorderWidth: 2,
-                             pointRadius: 5
-                         },
-                         {
-                             label: 'خط صفر',
-                             data: roiData.map(() => 0),
-                             borderColor: 'rgba(255, 99, 132, 0.5)',
-                             borderWidth: 1,
-                             borderDash: [5, 5],
-                             fill: false,
-                             pointRadius: 0
-                         }
-                     ]
-                 },
-                 options: {
-                     responsive: true,
-                     maintainAspectRatio: false,
-                     plugins: {
-                         title: {
-                             display: true,
-                             text: 'روند نرخ بازدهی (ROI) در طول زمان'
-                         },
-                         legend: { position: 'top' },
-                         tooltip: {
-                             callbacks: {
-                                 label: function(context) {
-                                     if (context.datasetIndex === 0) {
-                                         return `ROI: ${context.parsed.y.toFixed(2)}%`;
-                                     }
-                                     return null;
-                                 }
-                             }
-                         }
-                     },
-                     scales: {
-                         x: {
-                             title: { 
-                                 display: true, 
-                                 text: 'ماه' 
-                             }
-                         },
-                         y: {
-                             title: { 
-                                 display: true, 
-                                 text: 'نرخ بازدهی (درصد)' 
-                             },
-                             grid: {
-                                 color: function(context) {
-                                     // خط صفر را پررنگ‌تر نمایش دهیم
-                                     if (context.tick.value === 0) {
-                                         return 'rgba(255, 99, 132, 0.5)';
-                                     }
-                                     return 'rgba(0, 0, 0, 0.1)';
-                                 }
-                             },
-                             ticks: {
-                                 callback: function(value) {
-                                     return value.toFixed(1) + '%';
-                                 }
-                             }
-                         }
-                     }
-                 }
-             });
-         }
  
          function showError(message) {
```

</details>

---

Tool use: **todo_write**

## Todo List

- [x] حذف نمودار ROI از HTML
- [x] حذف تابع createROIChart از جاوااسکریپت
- [-] حذف فراخوانی createROIChart از کد اصلی

---

حالا فراخوانی تابع `createROIChart` را از کد اصلی حذف می‌کنم:


---

Tool use: **search_replace**


<details><summary>Edit file: /Users/alamalhoda/Projects/Arash_Project/djangobuilder/construction_project/dashboard/view/investor_profile.html</summary>

**Chunk 1**
Lines added: undefined, lines removed: 1

```diff
@@ -1436,5 +1436,4 @@
                              createPrincipalTransactionChart(investorTransactions);
                              createMonthlyPrincipalChart(investorTransactions);
-                             createROIChart(investorTransactions);
                          } catch (error) {
                              console.log('خطا در ایجاد نمودارها:', error);
```

</details>

---

Tool use: **todo_write**

## Todo List

- [x] حذف نمودار ROI از HTML
- [x] حذف تابع createROIChart از جاوااسکریپت
- [x] حذف فراخوانی createROIChart از کد اصلی

---

حالا بررسی می‌کنم که آیا خطایی در فایل وجود دارد:


---

Tool use: **read_lints**

<details>
          <summary>Read lints for 1 file</summary>
      
Lint paths:

- `/Users/alamalhoda/Projects/Arash_Project/djangobuilder/construction_project/dashboard/view/investor_profile.html`

Lint results


**No lint errors found**
</details>

---

عالی! نمودار ROI با موفقیت از صفحه پروفایل سرمایه‌گذاران حذف شد.

## خلاصه تغییرات انجام شده:

✅ **نمودار ROI حذف شد:**
- بخش HTML نمودار ROI که شامل container، header، controls و canvas بود
- توضیحات مربوط به فرمول ROI

✅ **تابع جاوااسکریپت حذف شد:**
- تابع `createROIChart()` که نمودار نرخ بازدهی را ایجاد می‌کرد
- تمام محاسبات مربوط به ROI تجمعی ماهانه

✅ **فراخوانی تابع حذف شد:**
- حذف `createROIChart(investorTransactions)` از لیست نمودارهای ایجاد شده

حالا صفحه پروفایل سرمایه‌گذاران بدون نمودار ROI کار می‌کند و فقط نمودارهای زیر را نمایش می‌دهد:
- روند تراکنش‌های آورده و برداشت
- مقایسه ماهانه کامل
- روند آورده و برداشت
- روند سود روزانه
- توزیع فعالیت‌ها
- ماهانه آورده و برداشت

---

_**User (2025-09-11 16:09Z)**_

نمودار روند آورده و برداشت و نمودار روند سود روزانه حذف شوندد

---

_**Assistant (default)**_

من نمودارهای "روند آورده و برداشت" و "روند سود روزانه" را از صفحه پروفایل سرمایه‌گذاران حذف می‌کنم.


---

Tool use: **todo_write**

## Todo List

- [-] حذف نمودار روند آورده و برداشت
- [ ] حذف نمودار روند سود روزانه
- [ ] حذف توابع جاوااسکریپت مربوط به این نمودارها
- [ ] حذف فراخوانی توابع از کد اصلی

---

ابتدا نمودار "روند آورده و برداشت" را حذف می‌کنم:


---

Tool use: **search_replace**


<details><summary>Edit file: /Users/alamalhoda/Projects/Arash_Project/djangobuilder/construction_project/dashboard/view/investor_profile.html</summary>

**Chunk 1**
Lines added: undefined, lines removed: 24

```diff
@@ -930,28 +930,4 @@
                  </div>
  
-                 <!-- Principal Trend Chart -->
-                 <div class="chart-container compact">
-                     <div class="chart-header">
-                         <h3 class="chart-title">
-                             <i class="fas fa-chart-line"></i>
-                             روند آورده و برداشت
-                         </h3>
-                     </div>
-                     <!-- Simple Chart Controls -->
-                     <div class="simple-chart-controls">
-                         <button class="simple-control-btn" onclick="collapseChart('principalTrendChart')" title="جمع/باز کردن">
-                             <i class="fas fa-chevron-up"></i>
-                         </button>
-                         <button class="simple-control-btn" onclick="simpleToggleChart('principalTrendChart')" title="مخفی/نمایش">
-                             <i class="fas fa-eye"></i>
-                         </button>
-                         <button class="simple-control-btn" onclick="simpleResizeChart('principalTrendChart')" title="بزرگ/کوچک">
-                             <i class="fas fa-expand-alt"></i>
-                         </button>
-                     </div>
-                     <div class="chart-wrapper">
-                         <canvas id="principalTrendChart"></canvas>
-                     </div>
-                 </div>
  
                  <!-- Profit Trend Chart -->
```

</details>

---

حالا نمودار "روند سود روزانه" را حذف می‌کنم:


---

Tool use: **search_replace**


<details><summary>Edit file: /Users/alamalhoda/Projects/Arash_Project/djangobuilder/construction_project/dashboard/view/investor_profile.html</summary>

**Chunk 1**
Lines added: undefined, lines removed: 24

```diff
@@ -931,28 +931,4 @@
  
  
-                 <!-- Profit Trend Chart -->
-                 <div class="chart-container compact">
-                     <div class="chart-header">
-                         <h3 class="chart-title">
-                             <i class="fas fa-chart-area"></i>
-                             روند سود روزانه
-                         </h3>
-                     </div>
-                     <!-- Simple Chart Controls -->
-                     <div class="simple-chart-controls">
-                         <button class="simple-control-btn" onclick="collapseChart('profitTrendChart')" title="جمع/باز کردن">
-                             <i class="fas fa-chevron-up"></i>
-                         </button>
-                         <button class="simple-control-btn" onclick="simpleToggleChart('profitTrendChart')" title="مخفی/نمایش">
-                             <i class="fas fa-eye"></i>
-                         </button>
-                         <button class="simple-control-btn" onclick="simpleResizeChart('profitTrendChart')" title="بزرگ/کوچک">
-                             <i class="fas fa-expand-alt"></i>
-                         </button>
-                     </div>
-                     <div class="chart-wrapper">
-                         <canvas id="profitTrendChart"></canvas>
-                     </div>
-                 </div>
  
                  <!-- Activity Distribution Chart -->
```

</details>

---

Tool use: **todo_write**

## Todo List

- [x] حذف نمودار روند آورده و برداشت
- [x] حذف نمودار روند سود روزانه
- [-] حذف توابع جاوااسکریپت مربوط به این نمودارها
- [ ] حذف فراخوانی توابع از کد اصلی

---

حالا توابع جاوااسکریپت مربوط به این نمودارها را حذف می‌کنم. ابتدا تابع `createPrincipalTrendChart`:


---

Tool use: **search_replace**


<details><summary>Edit file: /Users/alamalhoda/Projects/Arash_Project/djangobuilder/construction_project/dashboard/view/investor_profile.html</summary>

**Chunk 1**
Lines added: undefined, lines removed: 83

```diff
@@ -1516,87 +1516,4 @@
          }
  
-         // نمودار روند آورده و برداشت
-         function createPrincipalTrendChart(investorTransactions) {
-             // داده‌های فیلتر شده از سرور استفاده می‌کنیم
-             const principalData = investorTransactions.filter(row => row.entry_type === 'principal_deposit');
-             const withdrawalData = investorTransactions.filter(row => row.entry_type === 'principal_withdrawal');
-             
-             const dates = [...new Set([
-                 ...principalData.map(row => row.date_shamsi),
-                 ...withdrawalData.map(row => row.date_shamsi)
-             ].filter(date => date))].sort();
- 
-             const dailyPrincipal = {};
-             const dailyWithdrawal = {};
-             dates.forEach(date => {
-                 dailyPrincipal[date] = 0;
-                 dailyWithdrawal[date] = 0;
-             });
- 
-             principalData.forEach(row => {
-                 const date = row.date_shamsi;
-                 if (date) {
-                     dailyPrincipal[date] += parseFloat(row.amount || 0);
-                 }
-             });
- 
-             withdrawalData.forEach(row => {
-                 const date = row.date_shamsi;
-                 if (date) {
-                     dailyWithdrawal[date] += parseFloat(row.amount || 0);
-                 }
-             });
- 
-             const cumulativePrincipal = [];
-             const cumulativeWithdrawal = [];
-             let cumulativeP = 0;
-             let cumulativeW = 0;
- 
-             dates.forEach(date => {
-                 cumulativeP += dailyPrincipal[date];
-                 cumulativeW += dailyWithdrawal[date];
-                 cumulativePrincipal.push(cumulativeP / BASE_AMOUNT);
-                 cumulativeWithdrawal.push(cumulativeW / BASE_AMOUNT);
-             });
- 
-             const ctx = document.getElementById('principalTrendChart').getContext('2d');
-             charts.principalTrendChart = new Chart(ctx, {
-                 type: 'line',
-                 data: {
-                     labels: dates,
-                     datasets: [
-                         {
-                             label: 'آورده تجمعی (میلیون تومان)',
-                             data: cumulativePrincipal,
-                             borderColor: 'rgb(54, 162, 235)',
-                             backgroundColor: 'rgba(54, 162, 235, 0.1)',
-                             tension: 0.4,
-                             fill: true
-                         },
-                         {
-                             label: 'برداشت تجمعی (میلیون تومان)',
-                             data: cumulativeWithdrawal,
-                             borderColor: 'rgb(255, 99, 132)',
-                             backgroundColor: 'rgba(255, 99, 132, 0.1)',
-                             tension: 0.4,
-                             fill: true
-                         }
-                     ]
-                 },
-                 options: {
-                     responsive: true,
-                     maintainAspectRatio: false,
-                     plugins: {
-                         legend: { position: 'top' }
-                     },
-                     scales: {
-                         y: {
-                             beginAtZero: true,
-                             title: { display: true, text: 'میلیون تومان' }
-                         }
-                     }
-                 }
-             });
-         }
  
          // نمودار روند سود روزانه
```

</details>

---

حالا تابع `createProfitTrendChart` را حذف می‌کنم:


---

Tool use: **search_replace**


<details><summary>Edit file: /Users/alamalhoda/Projects/Arash_Project/djangobuilder/construction_project/dashboard/view/investor_profile.html</summary>

**Chunk 1**
Lines added: undefined, lines removed: 45

```diff
@@ -1517,49 +1517,4 @@
  
  
-         // نمودار روند سود روزانه
-         function createProfitTrendChart(investorTransactions) {
-             // داده‌های فیلتر شده از سرور استفاده می‌کنیم
-             const profitData = investorTransactions.filter(row => row.entry_type === 'profit_accrual');
-             
-             const dailyProfit = {};
-             profitData.forEach(row => {
-                 const date = row.date_shamsi;
-                 if (date) {
-                     dailyProfit[date] = (dailyProfit[date] || 0) + parseFloat(row.amount || 0);
-                 }
-             });
- 
-             const dates = Object.keys(dailyProfit).sort();
-             const profits = dates.map(date => dailyProfit[date] / BASE_AMOUNT);
- 
-             const ctx = document.getElementById('profitTrendChart').getContext('2d');
-             charts.profitTrendChart = new Chart(ctx, {
-                 type: 'line',
-                 data: {
-                     labels: dates,
-                     datasets: [{
-                         label: 'سود روزانه (میلیون تومان)',
-                         data: profits,
-                         borderColor: 'rgb(75, 192, 192)',
-                         backgroundColor: 'rgba(75, 192, 192, 0.1)',
-                         tension: 0.4,
-                         fill: true
-                     }]
-                 },
-                 options: {
-                     responsive: true,
-                     maintainAspectRatio: false,
-                     plugins: {
-                         legend: { position: 'top' }
-                     },
-                     scales: {
-                         y: {
-                             beginAtZero: true,
-                             title: { display: true, text: 'میلیون تومان' }
-                         }
-                     }
-                 }
-             });
-         }
  
          // نمودار توزیع فعالیت‌ها
```

</details>

---

Tool use: **todo_write**

## Todo List

- [x] حذف نمودار روند آورده و برداشت
- [x] حذف نمودار روند سود روزانه
- [x] حذف توابع جاوااسکریپت مربوط به این نمودارها
- [-] حذف فراخوانی توابع از کد اصلی

---

حالا فراخوانی این توابع را از کد اصلی حذف می‌کنم:


---

Tool use: **search_replace**


<details><summary>Edit file: /Users/alamalhoda/Projects/Arash_Project/djangobuilder/construction_project/dashboard/view/investor_profile.html</summary>

**Chunk 1**
Lines added: undefined, lines removed: 2

```diff
@@ -1382,6 +1382,4 @@
                          // ایجاد نمودارها با داده‌های فیلتر شده
                          try {
-                             createPrincipalTrendChart(investorTransactions);
-                             createProfitTrendChart(investorTransactions);
                              createActivityDistributionChart(investorTransactions);
                              createMonthlyComparisonChart(investorTransactions);
```

</details>

---

Tool use: **todo_write**

## Todo List

- [x] حذف نمودار روند آورده و برداشت
- [x] حذف نمودار روند سود روزانه
- [x] حذف توابع جاوااسکریپت مربوط به این نمودارها
- [x] حذف فراخوانی توابع از کد اصلی

---

حالا بررسی می‌کنم که آیا خطایی در فایل وجود دارد:


---

Tool use: **read_lints**

<details>
          <summary>Read lints for 1 file</summary>
      
Lint paths:

- `/Users/alamalhoda/Projects/Arash_Project/djangobuilder/construction_project/dashboard/view/investor_profile.html`

Lint results


**No lint errors found**
</details>

---

عالی! نمودارهای "روند آورده و برداشت" و "روند سود روزانه" با موفقیت از صفحه پروفایل سرمایه‌گذاران حذف شدند.

## خلاصه تغییرات انجام شده:

✅ **نمودار "روند آورده و برداشت" حذف شد:**
- بخش HTML نمودار که شامل container، header، controls و canvas بود
- تابع `createPrincipalTrendChart()` از جاوااسکریپت
- فراخوانی تابع از کد اصلی

✅ **نمودار "روند سود روزانه" حذف شد:**
- بخش HTML نمودار که شامل container، header، controls و canvas بود  
- تابع `createProfitTrendChart()` از جاوااسکریپت
- فراخوانی تابع از کد اصلی

حالا صفحه پروفایل سرمایه‌گذاران فقط نمودارهای زیر را نمایش می‌دهد:
- روند تراکنش‌های آورده و برداشت
- مقایسه ماهانه کامل
- توزیع فعالیت‌ها
- ماهانه آورده و برداشت

---

